<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Reminder</title>
</head>
<body style="margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f4f4f4;">
    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="max-width: 600px; margin: 0 auto; background-color: #ffffff;">
        <tr>
            <td style="padding: 40px 30px; text-align: center; background-color: #003366;">
                <h1 style="color: #ffffff; margin: 0;">Motorbike Service Reminder</h1>
            </td>
        </tr>
        <tr>
            <td style="padding: 30px;">
                <p style="margin: 0 0 20px 0; font-size: 16px; line-height: 1.5;">
                    Dear <%= order.customerName %>,
                </p>
                <p style="margin: 0 0 20px 0; font-size: 16px; line-height: 1.5;">
                    We hope this email finds you well. As part of our commitment to keeping your motorbike in optimal condition, we'd like to remind you that it's time for your regular service check.
                </p>

                <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="margin: 30px 0;">
                    <tr>
                        <td style="padding: 15px; background-color: #f8f8f8;">
                            <h2 style="margin: 0 0 15px 0; color: #003366; font-size: 18px;">Your Motorbike Details:</h2>
                            <% order.orderCartItems.forEach(function(cartItem) { %>
                                <div style="margin-bottom: 15px; padding: 10px; border: 1px solid #ffffff; border-radius: 4px;">
                                    <p style="margin: 5px 0; font-size: 14px;">
                                        <strong>Model:</strong> <%= cartItem.genericMotorbike.name %>
                                    </p>
                                    <% const relatedOrderItems = order.orderItems.filter(item => 
                                        item.motorbike.genericMotorbikeId === cartItem.genericMotorbike.id
                                    ); %>
                                    
                                    <% relatedOrderItems.forEach(function(item) { %>
                                        <div style="margin: 5px 0; padding: 5px;">
                                            <p style="margin: 3px 0; font-size: 14px;">
                                                <strong>Engine Code:</strong> <%= item.motorbike.engineCode %>
                                            </p>
                                            <p style="margin: 3px 0; font-size: 14px;">
                                                <strong>Chassis Code:</strong> <%= item.motorbike.chassisCode %>
                                            </p>
                                        </div>
                                    <% }); %>
                                    
                                    <% if (cartItem.genericMotorbike.warrantySpecs) { %>
                                        <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                                            <p style="margin: 5px 0; font-size: 14px;">
                                                <strong>Warranty Information:</strong>
                                            </p>
                                            <% Object.entries(cartItem.genericMotorbike.warrantySpecs).forEach(function([key, value]) { %>
                                                <p style="margin: 3px 0; font-size: 13px; color: #666666;">
                                                    <%= key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1') %>: <%= value %>
                                                </p>
                                            <% }); %>
                                        </div>
                                    <% } %>
                                </div>
                            <% }); %>
                        </td>
                    </tr>
                </table>

                <p style="margin: 0 0 20px 0; font-size: 16px; line-height: 1.5;">
                    Regular maintenance helps:
                </p>
                <ul style="margin: 0 0 20px 0; padding-left: 20px;">
                    <li style="margin-bottom: 10px; color: #555555;">Ensure optimal performance</li>
                    <li style="margin-bottom: 10px; color: #555555;">Extend your motorbike's lifespan</li>
                    <li style="margin-bottom: 10px; color: #555555;">Maintain safety standards</li>
                    <li style="margin-bottom: 10px; color: #555555;">Prevent unexpected breakdowns</li>
                </ul>

                <div style="margin: 30px 0; text-align: center;">
                    <a href="tel:YOUR-PHONE-NUMBER" style="display: inline-block; padding: 12px 24px; background-color: #003366; color: #ffffff; text-decoration: none; border-radius: 4px;">Contact Us for Service</a>
                </div>

                <p style="margin: 30px 0 0 0; font-size: 14px; color: #666666; border-top: 1px solid #dddddd; padding-top: 20px;">
                    Best regards,<br>
                    Your Motorcycle Service Team
                </p>
            </td>
        </tr>
        <tr>
            <td style="padding: 30px; background-color: #f8f8f8; text-align: center;">
                <p style="margin: 0; font-size: 12px; color: #666666;">
                    This is an automated reminder. Please do not reply to this email.
                </p>
            </td>
        </tr>
    </table>
</body>
</html>